{"ast":null,"code":"import { profileActions } from \"../slices/profileSlice\";\nimport request from \"../../utils/request\";\nimport { toast } from \"react-toastify\";\n\n// Get User Profile\nexport function getUserProfile(userId) {\n  return async dispatch => {\n    try {\n      var _JSON$parse;\n      const token = (_JSON$parse = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.token;\n      const {\n        data\n      } = await request.get(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(profileActions.setProfile(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Upload Profile Photo\nexport function uploadProfilePhoto(newPhoto) {\n  return async dispatch => {\n    try {\n      var _JSON$parse2;\n      const token = (_JSON$parse2 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.token;\n      const {\n        data\n      } = await request.post(`/api/users/profile/profile-photo-upload`, newPhoto, {\n        headers: {\n          Authorization: \"Bearer \" + token,\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      dispatch(profileActions.setProfilePhoto(data.profilePhoto));\n      toast.success(data.message);\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.profilePhoto = data === null || data === void 0 ? void 0 : data.profilePhoto;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Update Profile\nexport function updateProfile(userId, profile) {\n  return async dispatch => {\n    try {\n      var _JSON$parse3;\n      const token = (_JSON$parse3 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse3 === void 0 ? void 0 : _JSON$parse3.token;\n      const {\n        data\n      } = await request.put(`/api/users/profile/${userId}`, profile, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(profileActions.updateProfile(data));\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.username = data === null || data === void 0 ? void 0 : data.username;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Delete Profile (Account)\nexport function deleteProfile(userId) {\n  return async dispatch => {\n    try {\n      var _JSON$parse4;\n      const token = (_JSON$parse4 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse4 === void 0 ? void 0 : _JSON$parse4.token;\n      dispatch(profileActions.setLoading());\n      const {\n        data\n      } = await request.delete(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(profileActions.setIsProfileDeleted());\n      toast.success(data === null || data === void 0 ? void 0 : data.message);\n      setTimeout(() => dispatch(profileActions.clearIsProfileDeleted()), 2000);\n    } catch (error) {\n      toast.error(error.response.data.message);\n      dispatch(profileActions.clearLoading());\n    }\n  };\n}\n\n// Get Users Count (for admin dashboard)\nexport function getUsersCount() {\n  return async dispatch => {\n    try {\n      var _JSON$parse5;\n      const token = (_JSON$parse5 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse5 === void 0 ? void 0 : _JSON$parse5.token;\n      const {\n        data\n      } = await request.get(`/api/users/count`, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(profileActions.setUserCount(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Get All Users Profile (for admin dashboard)\nexport function getAllUsersProfile() {\n  return async dispatch => {\n    try {\n      var _JSON$parse6;\n      const token = (_JSON$parse6 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse6 === void 0 ? void 0 : _JSON$parse6.token;\n      const {\n        data\n      } = await request.get(`/api/users/profile`, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(profileActions.setProfiles(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}","map":{"version":3,"names":["profileActions","request","toast","getUserProfile","userId","dispatch","_JSON$parse","token","JSON","parse","localStorage","getItem","data","get","headers","Authorization","setProfile","error","response","message","uploadProfilePhoto","newPhoto","_JSON$parse2","post","setProfilePhoto","profilePhoto","success","user","setItem","stringify","updateProfile","profile","_JSON$parse3","put","username","deleteProfile","_JSON$parse4","setLoading","delete","setIsProfileDeleted","setTimeout","clearIsProfileDeleted","clearLoading","getUsersCount","_JSON$parse5","setUserCount","getAllUsersProfile","_JSON$parse6","setProfiles"],"sources":["D:/Blog-pro/frontend/src/redux/apiCalls/profileApiCall.js"],"sourcesContent":["import { profileActions } from \"../slices/profileSlice\";\nimport request from \"../../utils/request\";\nimport { toast } from \"react-toastify\";\n\n// Get User Profile\nexport function getUserProfile(userId) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token;\n      const { data } = await request.get(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token,\n        },\n      });\n      dispatch(profileActions.setProfile(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Upload Profile Photo\nexport function uploadProfilePhoto(newPhoto) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token;\n      const { data } = await request.post(\n        `/api/users/profile/profile-photo-upload`,\n        newPhoto,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token,\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        }\n      );\n\n      dispatch(profileActions.setProfilePhoto(data.profilePhoto));\n      toast.success(data.message);\n\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.profilePhoto = data?.profilePhoto;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Update Profile\nexport function updateProfile(userId, profile) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token;\n      const { data } = await request.put(\n        `/api/users/profile/${userId}`,\n        profile,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token,\n          },\n        }\n      );\n\n      dispatch(profileActions.updateProfile(data));\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.username = data?.username;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Delete Profile (Account)\nexport function deleteProfile(userId) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token;\n      dispatch(profileActions.setLoading());\n      const { data } = await request.delete(\n        `/api/users/profile/${userId}`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token,\n          },\n        }\n      );\n\n      dispatch(profileActions.setIsProfileDeleted());\n      toast.success(data?.message);\n      setTimeout(() => dispatch(profileActions.clearIsProfileDeleted()), 2000);\n    } catch (error) {\n      toast.error(error.response.data.message);\n      dispatch(profileActions.clearLoading());\n    }\n  };\n}\n\n// Get Users Count (for admin dashboard)\nexport function getUsersCount() {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token;\n      const { data } = await request.get(\n        `/api/users/count`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token,\n          },\n        }\n      );\n\n      dispatch(profileActions.setUserCount(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Get All Users Profile (for admin dashboard)\nexport function getAllUsersProfile() {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token;\n      const { data } = await request.get(\n        `/api/users/profile`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token,\n          },\n        }\n      );\n\n      dispatch(profileActions.setProfiles(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}